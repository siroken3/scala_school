<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scala School - Scalaの基礎</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link rel="stylesheet" href="bootstrap-1.1.0.min.css">

  </head>

  <body>
  
    <div class="topbar">
      <div class="fill">
        <div class="container fixed">
          <h3><a href="index.html">Scalaの基礎</a></h3>
          <ul class="nav secondary-nav">
            
            
              <li><a href="basics2.html">Next&raquo;</a></li>
            
          </ul>

        </div>
      </div>
    </div>

    <div class="container" style="padding-top: 60px;">
      <p>このレッスンでは以下を説明します:</p>
<ul>
	<li>値</li>
	<li>式</li>
	<li>関数</li>
	<li>クラス</li>
	<li>メソッド</li>
	<li>基本的な継承</li>
	<li>try-catch-finally</li>
</ul>
<h2>このクラスについて</h2>
<p>最初の数週間は、基本的な構文と概念について説明します。その後、多くの演習を行います。</p>
<p>いくつかの例はインタプリタで記述したように示しますが、残りはソースファイルの形で示したいと思います。</p>
<p>インタプリタによって問題領域を探索するのを容易にすることができます。</p>
<h2>なぜScalaか?</h2>
<ul>
	<li>表現に富んでいる
	<ul>
		<li>ファーストクラス関数</li>
		<li>クロージャ</li>
	</ul></li>
	<li>簡潔である
	<ul>
		<li>型推論</li>
		<li>関数生成時リテラル構文</li>
	</ul></li>
	<li>Javaとの相互運用性
	<ul>
		<li>javaライブラリを再利用可能</li>
		<li>javaツールを再利用可能</li>
		<li>パフォーマンスを低下させることがない</li>
	</ul></li>
</ul>
<h2>どのようにしてScalaが動作するか?</h2>
<ul>
	<li>javaバイトコードにコンパイル</li>
	<li>任意の標準JVMで動作
	<ul>
		<li>いくつかのDalvikのような、非標準JVMでも動作</li>
		<li>javaコンパイラの作者が書いたScalaコンパイラ</li>
	</ul></li>
</ul>
<h2>Scalaについて考える</h2>
<p>Scalaは単によりよいJavaではありません。新鮮な気持ちで学ぶべきであり,そうすることでより多くのことをこのクラスから得ることができるでしょう。</p>
<h2>インタプリタの起動</h2>
<p>Scala付属の<code>sbt console</code>を利用します。</p>
<pre>
$ sbt console

[...]

Welcome to Scala version 2.8.0.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_20).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt;
</pre>
<h2>式 (Expressions)</h2>
<pre>
scala&gt; 1 + 1
res0: Int = 2
</pre>
<p>res0 はあなたが実行した結果に対してインタプリタが自動的に生成した値の名前です。型 Int であることと整数値2であることが示されています。</p>
<p>Scalaの(ほぼ)すべてが式です。</p>
<h2>定数 (Values)</h2>
<p>式の結果には名前をつけることができます。</p>
<pre>
scala&gt; val two = 1 + 1
two: Int = 2
</pre>
<p>定数に割り当てられた値は変更することができません。</p>
<h3>変数 (Variables)</h3>
<p>名前に割り当てた値を変更する必要がある場合、<code>var</code>を代わりに使用することができます。</p>
<pre>
scala&gt; var name = "steve"
name: java.lang.String = steve

scala&gt; name = "marius"
name: java.lang.String = marius
</pre>
<h3>関数 (Functions)</h3>
<p>def を使って関数を生成することができます。</p>
<pre>
scala&gt; def addOne(m: Int): Int = m + 1
addOne: (m: Int)Int
</pre>
<p>Scalaでは、関数のパラメタに対しては型シグネチャを指定する必要があります。インタプリタは喜んで型シグネチャを応答します。</p>
<pre>
scala&gt; val three = addOne(2)
three: Int = 3
</pre>
<p>引数がない関数は括弧を省略することができます。</p>
<pre>
scala&gt; def three() = 1 + 2
three: ()Int

scala&gt; three()
res2: Int = 3

scala&gt; three
res3: Int = 3
</pre>
<h3>無名関数 (Anonymous Functions)</h3>
<p>無名関数を作ることができます。</p>
<pre>
scala&gt; (x: Int) =&gt; x + 1
res2: (Int) =&gt; Int = &lt;function1&gt;
</pre>
<p>この関数は Int型のxに対して 1 を加算します。</p>
<pre>
scala&gt; res2(1)
res3: Int = 2
</pre>
<p>無名関数をaround(周囲?)に渡すか、定数に渡すことができます。</p>
<pre>
scala&gt; val addOne = (x: Int) =&gt; x + 1
addOne: (Int) =&gt; Int = &lt;function1&gt;

scala&gt; addOne(1)
res4: Int = 2
</pre>
<p>作成した関数が多くの式から構成されている場合、{}を使用して見やすくすることができます。</p>
<pre>
def timesTwo(i: Int): Int = {
  println("hello world")
  i * 2
}
</pre>
<p>これは無名関数の場合も同様です。</p>
<pre>
scala&gt; { i: Int =&gt;
  println("hello world")
  i * 2
}
res0: (Int) =&gt; Int = &lt;function1&gt;
</pre>
<p>この構文は引数として無名関数を渡す場合によく使用されます。</p>
<h4>部分適用 (Partial application)</h4>
<p>アンダースコアを使って部分的に関数に適用して、他の関数に渡すことができます。</p>
<pre>
scala&gt; def adder(m: Int, n: Int) = m + n
adder: (m: Int,n: Int)Int
</pre>

<pre>
scala&gt; val add2 = adder(2, _:Int)
add2: (Int) =&gt; Int = &lt;function1&gt;

scala&gt; add2(3)
res50: Int = 5
</pre>
<p>最後の引数だけではなく、任意の引数リストの中の引数に対して部分適用することができます。</p>
<h4>関数のカリー化 (Curried functions)</h4>
<p>時にはあなたの作った関数にいくつか引数を適用しておいたものを人々に提供しておいて、あとから適用してもらうことは理にかなっています。</p>
<p>Here&#8217;s an example of a function that lets you build multipliers of two numbers together. At one call site, you&#8217;ll decide which is the multiplier and at a later call site, you&#8217;ll choose a multipicand.</p>
<p>あなたが2つの数値の乗算器の関数を定義した例をしめします。ある呼び出し側でどれが乗数かを決定し、他の呼び出し側でどれが被乗数かを選択することができます。</p>
<pre>
scala&gt; def multiply(m: Int)(n: Int): Int = m * n
multiply: (m: Int)(n: Int)Int
</pre>
<p>直接両方の引数を指定することもできます。</p>
<pre>
scala&gt; multiply(2)(3)
res0: Int = 6
</pre>
<p>最初のパラメータを指定し、部分的に次のパラメータを指定することもできます。</p>
<pre>
scala&gt; val timesTwo = multiply(2)(_)
timesTwo: (Int) =&gt; Int = &lt;function1&gt;

scala&gt; timesTwo(3)
res1: Int = 6
</pre>
<p>こちらは時には狂気じみたコードの一部になります。</p>
<pre>
multiplyThenFilter { m: Int =&gt;
  m * 2
} { n: Int =&gt;
  n &lt; 5
}
</pre>
<p>私はあなたが上記のコードに慣れるのには時間がかかることをお約束します。</p>
<p>任意の関数に対して複数の引数を指定するとその関数をカリー化できます。私たちの以前の<pre>adder</pre>で試してみましょう。</p>
<pre>
scala&gt; (adder(_, _)).curried
res1: (Int) =&gt; (Int) =&gt; Int = &lt;function1&gt;
</pre>
<h3>可変長引数 (Variable length arguments)</h3>
<p>繰り返し同じ型のパラメータを使うことができる特殊な構文を示します。</p>
<pre>
def capitalizeAll(args: String*) = {
  args.map { arg =&gt;
    arg.capitalize
  }
}
</pre>
<h3>クラス</h3>
<pre>
scala&gt; class Calculator {
     |   val brand: String = "HP"
     |   def add(m: Int, n: Int): Int = m + n
     | }
defined class Calculator

scala&gt; val calc = new Calculator
calc: Calculator = Calculator@e75a11

scala&gt; calc.add(1, 2)
res1: Int = 3

scala&gt; calc.brand
res2: String = "HP"
</pre>
<p>上記はメソッドは def 、属性は val によって定義している例です。メソッドはクラスの状態にアクセスできる単なる関数です。</p>
<h4>コンストラクタ (Constructor)</h4>
<p>Constructors aren&#8217;t special methods, they are the code outside of method definitions in your class.  Let&#8217;s extend our Calculator example to take a constructor argument and use it to initialize internal state.</p>
<p>コンストラクタは特殊なメソッドではなく、クラスの中のメソッド定義外にあるコードです。では私たちの Calculator の例をコンストラクタの引数をとり、初期状態を設定するように拡張してみましょう。</p>
<pre>
class Calculator(brand: String) {
  /**
   * コンストラクタ
   */
  val color: String = if (brand == "TI") {
    "blue"
  } else if (brand == "HP") {
    "black"
  } else {
    "white"
  }

  // インスタンスメソッド
  def add(m: Int, n: Int): Int = m + n
}
</pre>
<p>二種類の異なるコメント記述スタイルに注意してください。</p>
<h3>式 (Expressions)</h3>
<p>私たちの BasicCalculatorの例はどのように Scalaが式指向であるかどうかを示す一例となっています。変数 color は if/else式に基づいて結合(bound)されています。Scalaは高度に式指向で多くは文というよりも式です。</p>
<h3>継承 (Inheritance)</h3>
<pre>
class ScientificCalculator(brand: String) extends Calculator(brand) {
  def log(m: Double, base: Double) = math.log(m) / math.log(base)
}
</pre>
<h3>メソッドオーバーロード (Overloading methods)</h3>
<pre>
class EvenMoreScientificCalculator(brand: String) extends ScientificCalculator(brand) {
  def log(m: Int) = log(m, math.exp(1))
}
</pre>
<h3>トレイト (Traits)</h3>
<p><code>traits</code> はあなたのクラスに継承したりmixinしたりすることができる属性や振る舞いを集めたものです。</p>
<pre>
trait Car {
  val brand: String
}
</pre>

<pre>
class BMW extends Car {
  val brand = "BMW"
}
</pre>
<h3>型 (Types)</h3>
<p>以前、数値型の一種である<code>Int</code>をとる関数を定義することを見てきました。関数は一般的な(genericな)型で定義しておいて任意の型で動作させることができます。この場合、<pre>type parameter</pre>がかぎ括弧を使用した構文を導入します。</p>
<p>You can introduce as many type parameters. Here&#8217;s an example of a Cache of generic Keys and Values.</p>
<p>多くのtype parameterを導入することができます。一般的なキーと値を使った Cache の例を示します。</p>
<pre>
trait Cache[K, V] {
  def get(key: K): V
  def put(key: K, value: V)
  def delete(key: K)
}
</pre>
<p>メソッドに対しても type parameter を導入することができます。</p>
<pre>
def remove[K](key: K)
</pre>
    </div> <!-- /container -->

    <div id="footer">
      <div class="inner">
        <div class="container">
          <p>
            Built at <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/stevej" target="_blank">@stevej</a> and <a href="http://twitter.com/marius" target="_blank">@marius</a> with much help from <a href="http://twitter.com/evanm" target="_blank">@evanm</a>, <a href="http://twitter.com/sprsquish" target="_blank">@sprsquish</a>, <a href="http://twitter.com/kevino" target="_blank">@kevino</a>, <a href="http://twitter.com/zuercher" target="_blank">@zuercher</a>, <a href="http://twitter.com/timtrueman" target="_blank">@timtrueman</a>, <a href="http://twitter.com/wickman" target="_blank">@wickman</a> and <a href="http://twitter.com/mccv" target="_blank">@mccv</a><br />
            Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>.
          </p>
        </div>
      </div>
    </div>

  </body>
</html>
